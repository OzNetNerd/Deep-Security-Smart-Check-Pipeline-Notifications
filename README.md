# About

Takes the output generated by [Smart Check Scan Action](https://github.com/deep-security/smartcheck-scan-action) and sends it to Slack.

# Instructions
## Smart Check

1. Spin up [Smart Check](https://github.com/OzNetNerd/Deep-Security-Smart-Check-Demo) 

## Slack

1. Create a Slack WorkSpace
2. Create a channel where you'd like the messages to be sent
2. Create an app called `SmartCheckFindings`. Then inside the app:
	1. Create a bot user
	2. Give the app permissions to send messages as `SmartCheckFindings`
	3. Install the app in your workspace
	4. Record the `Bot User OAuth Access Token` as it will be required in your pipeline
	
## Pipeline

1. Spin up a [CI/CD server](https://github.com/OzNetNerd/Packer-Gitlab)
2. Create a pipeline
3. Add a stage to the pipeline which calls the `Smart Check Pipeline Notifications` container, like so:

	```
	docker run -t -i \
	-e SLACK_API_TOKEN=<BOT_TOKEN> \
	-e SLACK_CHANNEL_NAME=<CHANNEL_NAME> \
	-e SMART_CHECK_URL=<SMART_CHECK_URL> 
	-v <REPORT_FILENAME>:/tmp/report.txt \
	oznetnerd/smart-check-pipeline-notifications
	```
	
*Note:* The report can be called anything, and installed anywhere on your system. However, it must be mounted in `/tmp/report.txt` within the `Smart Check Pipeline Notifications` container.
  